# ------------------------------------------------------------------------------
# Sample Module Configuration
# ------------------------------------------------------------------------------
# This file demonstrates a complete configuration entry for a module.
# It corresponds to the 'ModuleConfig' struct in the ox_webservice API.
# This entire block represents ONE item in the 'modules' list of ox_webservice.yaml.
modules:
  - name: "sample_module_instance" # [Required] logical name of this module instance
    id: "mod_sample_01"            # [Optional] unique identifier
    
    # --- Execution Phase & Priority ---
    phase: Content                 # [Optional] Phase to run in (Default: Content)
                                 # Options: PreAuthentication, Authentication, Content, ErrorHandling, etc.
    priority: 100                  # [Optional] Order within the phase (Lower = earlier) (Default: 0)

    # --- URI Matching (Generic) ---
    # Restricts execution to requests matching these rules.
    # If omitted/null, runs for ALL requests in the phase.
    uris:
    - path: "^/sample/.*"         # [Required] Regex for Request Path (alias: url)
      hostname: "example.com"     # [Optional] Regex for Host header
      protocol: "https"           # [Optional] Regex for protocol (http/https)

    # --- Module Parameters (Specific) ---
    # Arbitrary JSON/YAML passed to the module's initialization function.
    # The structure depends entirely on the specific module implementation.
    params:
      # Example params for 'ox_webservice_stream':
      content_root: "/var/www/sample"
      mimetypes_file: "/conf/mimetypes.yaml"
      on_content_conflict: "overwrite"

    # --- Library Path ---
    # If specified, loads the module from this absolute or relative path.
    # If omitted, defaults to "target/debug/lib<name>.so" (Linux) or similar.
    path: "/usr/lib/ox_webservice/mod_sample.so"

    # --- Legacy/Optional Fields ---
    # error_path: "/500" # [Optional] Redirect path on error (module dependent)
