
log4rs_config: "/var/repos/oxIDIZER/conf/log4rs.yaml"
servers:
  - protocol: "http"
    port: 3000
    bind_address: "127.0.0.1"
    hosts:
      - name: "localhost"
      - name: "example-1.com"
  - protocol: "http"
    port: 3001
    bind_address: "127.0.0.1"
    hosts:
      - name: "example-2.com"
  - protocol: "https"
    port: 3002
    bind_address: "0.0.0.0"
    hosts:
      - name:  "localhost_ssl"
        tls_cert_path: "conf/certs/cert.pem"
        tls_key_path: "conf/certs/key.pem"
      - name:  "example-ssl-1.com"
        tls_cert_path: "conf/certs/cert1.pem"
        tls_key_path: "conf/certs/key1.pem"
urls:
  - url: "[.]jinja$"
    module_id: "default_template_jinja2"
  - url: "[.]jinja2$"
    module_id: "default_template_jinja2"
  - url: "[.]*"
    module_id: "default_stream"
 
modules:
  - id: "default_stream"
    name: "ox_webservice_stream"
    priority: 999
    phase: Content
    uris:
    params:
      config_file: "/var/repos/oxIDIZER/conf/ox_webservice_stream.yaml"
  - id: "default_template_jinja2"
    name: "ox_webservice_template_jinja2"
    priority: 998
    phase: Content
    uris:
    params:
      config_file: "/var/repos/oxIDIZER/conf/ox_webservice_template_jinja2.yaml"
  - id: "error_handler_jinja2"
    name: "ox_webservice_errorhandler_jinja2"
    priority: 999
    phase: ErrorHandling
    uris:
        - path: ".*"
    params:
      config_file: "/var/repos/oxIDIZER/conf/ox_webservice_errorhandler_jinja2.yaml"
  - id: "forwarded_for"
    name: "ox_webservice_forwarded_for"
    priority: 100
    phase: PreEarlyRequest
    path: "target/debug/libox_webservice_forwarded_for.so"
    uris:
        - path: ".*"
  - id: "restore_ip"
    name: "ox_webservice_restore_ip"
    priority: 100
    phase: PostLateRequest
    path: "target/debug/libox_webservice_restore_ip.so"
    uris:
        - path: ".*"
  - id: "status_module"
    name: "ox_webservice_status"
    priority: 500
    phase: Content
    uris:
        - path: "/status"
    params:
      config_file: "/var/repos/oxIDIZER/conf/ox_webservice_status.yaml"